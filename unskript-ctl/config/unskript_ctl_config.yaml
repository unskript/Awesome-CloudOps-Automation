# unSkript-ctl config file
#
# Copyright (c) 2023 unSkript.com
# All rights reserved.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
# FOR A PARTICULAR PURPOSE
#
#
version: 1.0.0

#
# Global section
#
# Global config
#
global:
   # if enable_runbooks is enabled, jupyterlab is launched so that one can open
   # runbooks in jupyterlab.
   enable_runbooks: true

#
# Checks section
#
# Check specific configuration. For eg, arguments.
#
checks:
  # Arguments common to all checks, like region, namespace, etc.
  arguments:
    global:
       region: us-west-2

# Credential section
#
# uncomment the relevant sections below to enable respective credential
#
credential:
  # AWS connector details
  aws:
   - name: awscreds
     enable: true
     access-key: ${UNSKRIPT_CREDS_AWS_ACCESS_KEY}
     secret-access-key: ${UNSKRIPT_CREDS_AWS_SECRET_KEY}

  # Kubernetes connector details
  k8s:
   - name: k8screds
     enable: false
     kubeconfig: ${UNSKRIPT_CREDS_K8S_KUBECONFIG}

  # GCP connector details
  gcp:
   - name: gcpcreds
     enable: false
     credential-json: ${UNSKRIPT_CREDS_GCP_CREDENTIAL_JSON}

  # Elasticsearch connector details
  elasticsearch:
   - name: escreds
     enable: false
     server: ${UNSKRIPT_CREDS_ES_SERVER}
     api-key: ${UNSKRIPT_CREDS_ES_KEY}
     no-verify-ssl: ${UNSKRIPT_CREDS_ES_VERIFY_SSL:-true}

  # Redis connector details
  redis:
   - name: rediscreds
     enable: false
     server: ${UNSKRIPT_CREDS_REDIS_SERVER}
     port: ${UNSKRIPT_CREDS_REDIS_PORT}
     username: ${UNSKRIPT_CREDS_REDIS_USERNAME}
     password: ${UNSKRIPT_CREDS_REDIS_PASSWORD}
     database: ${UNSKRIPT_CREDS_REDIS_DATABASE}
     use-ssl: ${UNSKRIPT_CREDS_REDIS_USE_SSL:-false}

  # Postgres connector details
  postgres:
   - name: postgrescreds
     enable: false
     server: ${UNSKRIPT_CREDS_POSTGRES_SERVER}
     port: ${UNSKRIPT_CREDS_POSTGRES_PORT}
     username: ${UNSKRIPT_CREDS_POSTGRES_USERNAME}
     password: ${UNSKRIPT_CREDS_POSTGRES_PASSWORD}
     database: ${UNSKRIPT_CREDS_POSTGRES_DATABASE}

  # Mongodb connector details
  mongodb:
   - name: mongodbcreds
     enable: false
     server: ${UNSKRIPT_CREDS_MONGODB_SERVER}
     port: ${UNSKRIPT_CREDS_MONGODB_PORT}
     username: ${UNSKRIPT_CREDS_MONGODB_USERNAME}
     password: ${UNSKRIPT_CREDS_MONGODB_PASSWORD}

  # Kafka connector details
  kafka:
   - name: kafkacreds
     enable: true
     broker: ${UNSKRIPT_CREDS_KAFKA_BROKER}
     username: ${UNSKRIPT_CREDS_KAFKA_USERNAME}
     password: ${UNSKRIPT_CREDS_KAFKA_PASSWORD}
     zookeeper: ${UNSKRIPT_CREDS_KAFKA_ZOOKEEPER}

  # Rest connector details
  rest:
   - name: restcreds
     enable: true
     base-url: ${UNSKRIPT_CREDS_REST_BASE_URL}
     username: ${UNSKRIPT_CREDS_REST_USERNAME}
     password: ${UNSKRIPT_CREDS_REST_PASSWORD}
     headers: ${UNSKRIPT_CREDS_REST_HEADERS}

  # Vault connector details
  vault:
   - name: vaultcreds
     enable: true
     url: ${UNSKRIPT_CREDS_VAULT_URL}
     token: ${UNSKRIPT_CREDS_VAULT_TOKEN}

  # Keycloak connector details
  keycloak:
   - name: keycloakcreds
     enable: true
     server_url: ${UNSKRIPT_CREDS_KEYCLOAK_SERVER_URL}
     realm: ${UNSKRIPT_CREDS_KEYCLOAK_REALM}
     client-id: ${UNSKRIPT_CREDS_KEYCLOAK_CLIENT_ID}
     username: ${UNSKRIPT_CREDS_KEYCLOAK_USERNAME}
     password: ${UNSKRIPT_CREDS_KEYCLOAK_PASSWORD}
     client-secret: ${UNSKRIPT_CREDS_KEYCLOAK_CLIENT_SECRET}
     no-verify-certs: ${UNSKRIPT_CREDS_KEYCLOAK_NO_VERIFY_CERTS:-true}

#
# Notification section
#
# uncomment the relevant sections below to enable either slack or email notification
notification:
  # Slack Notification setting
  Slack:
    enable: true
    web-hook-url: ${UNSKRIPT_NOTIFICATION_SLACK_WEBHOOK_URL}
    channel-name: ${UNSKRIPT_NOTIFICATION_SLACK_CHANNEL_NAME}
    verbose: false #Not yet supported
  Email:
    verbose: true #Not yet supported
    enable: true
    # provider for the email. Possible values:
    #    - SMTP - SMTP server
    #    - SES -  AWS SES
    #    - Sendgrid - Sendgrid
    provider: ""
    SMTP:
      smtp-host: ${UNSKRIPT_NOTIFICATION_SMTP_SERVER}
      smtp-user: ${UNSKRIPT_NOTIFICATION_USERNAME}
      smtp-password: ${UNSKRIPT_NOTIFICATION_PASSWORD}
      to-email: ${UNSKRIPT_NOTIFICATION_RECEIVER_EMAIL}
      from-email: support@unskript.com
    SES:
      access_key: ${UNSKRIPT_NOTIFICATION_SMTP_SERVER}
      secret_acess: ${UNSKRIPT_NOTIFICATION_USERNAME}
      region: us-west-2
      to-email: ${UNSKRIPT_NOTIFICATION_RECEIVER_EMAIL}
      from-email: support@unskript.com
    Sendgrid:
      api_key: foo
      to-email: ${UNSKRIPT_NOTIFICATION_RECEIVER_EMAIL}
      from-email: support@unskript.com


#
# Job section
#
# Job detail contains information about what all unskript-ctl can run.
jobs:
  - name: "" # Unique name
    # The results of the job to be notified or not.
    notify: true
    enable: true
    # Specific checks to run
    # Not supported: multiple checks, only single check support for now.
    checks: []
    # Specific suites to run
    # Not supported
    suites: []
    # connector types whose checks need to be run
    # Possible values:
    #   - aws
    #   - k8s
    #   - gcp
    #   - postgresql
    #   - slack
    #   - mongodb
    #   - jenkins
    #   - mysql
    #   - jira
    #   - rest
    #   - elasticsearch
    #   - kafka
    #   - grafana
    #   - ssh
    #   - prometheus
    #   - datadog
    #   - stripe
    #   - redis
    #   - zabbix
    #   - opensearch
    #   - pingdom
    #   - github
    #   - terraform
    #   - airflow
    #   - hadoop
    #   - mssql
    #   - snowflake
    #   - splunk
    #   - salesforce
    #   - azure
    #   - nomad
    #   - netbox
    #   - opsgenie
    connector_types: []
    # Custom scripts to be run.
    # Not supported
    custom_scripts: []

#
# Scheduler section
#
# You can configure multiple schedules.
scheduler:
  - enable: true
    # Cadence is specified in cron syntax. More information about the syntax can
    # be found in https://crontab.guru
    # minute  hour  day (of month)  month  day (of week)
    #   *      *          *           *        *
    # Example: "*/30 * * * *"   <= This will run every 30 Minutes
    cadence: "*/60 * * * *"
    # Name of the job to add to the schedule
    job_name: ""
